Quiz.window.CreateForm=function(e){(e=e||{}).id||(e.id="quiz-form-window-create"),Ext.applyIf(e,{title:"Form",action:"mgr/form/create"}),Quiz.window.CreateForm.superclass.constructor.call(this,e)},Ext.extend(Quiz.window.CreateForm,Quiz.window.Default,{getFields:function(e){return[{xtype:"hidden",name:"id",id:Ext.id()},{xtype:"modx-tabs",deferredRender:!1,stateful:!0,id:Ext.id(),listeners:{tabchange:()=>{this.resizeWindow()}},items:[{title:_("quiz_form_tab_cover"),layout:"form",hideMode:"offsets",defaults:{msgTarget:"under",border:!1},items:this.getTabCover(e)},{title:_("quiz_form_tab_form"),layout:"form",hideMode:"offsets",defaults:{msgTarget:"under",border:!1},items:this.getTabForm(e)},{title:_("quiz_form_tab_steps"),layout:"form",hideMode:"offsets",defaults:{msgTarget:"under",border:!1},items:this.getTabSteps(e)},{title:_("quiz_form_tab_contacts"),layout:"form",hideMode:"offsets",defaults:{msgTarget:"under",border:!1},items:this.getTabContacts(e)},{title:_("quiz_form_tab_buttons"),layout:"form",hideMode:"offsets",defaults:{msgTarget:"under",border:!1},items:this.getTabButtons(e)},{title:_("quiz_form_tab_results"),layout:"form",hideMode:"offsets",defaults:{msgTarget:"under",border:!1},items:this.getTabResults(e)}]}]},getTabCover:function(e){return[{xtype:"xcheckbox",boxLabel:_("quiz_form_cover"),name:"cover",id:e.id+"-cover",checked:!1},{xtype:"fieldset",title:_("quiz_form_content"),columnWidth:1,id:Ext.id(),collapsible:!0,hidden:!1,anchor:"99.5%",items:[{xtype:"textfield",fieldLabel:_("quiz_form_title"),description:"<b>[[+title]]</b>",name:"title",id:e.id+"-title",anchor:"99.5%",allowBlank:!0},{xtype:"textarea",fieldLabel:_("quiz_form_description"),description:"<b>[[+description]]</b>",name:"description",id:e.id+"-description",anchor:"99.5%",allowBlank:!0},{xtype:"quiz-image",fieldLabel:_("quiz_form_image"),description:"<b>[[+image]]</b>",name:"image",id:e.id+"-image",anchor:"100%",allowBlank:!0},{xtype:"textarea",fieldLabel:_("quiz_form_content"),description:"<b>[[+content]]</b>",name:"content",id:e.id+"-content",anchor:"99%",allowBlank:!0,listeners:{afterrender:e=>{Quiz.utils.renderRTE(e),setTimeout(()=>{this.resizeWindow()},500)}}}]}]},getTabForm:function(e){return[{layout:"column",items:[{columnWidth:.499,layout:"form",defaults:{msgTarget:"under"},items:[{xtype:"textfield",fieldLabel:_("quiz_form_formname"),description:"<b>[[+formname]]</b>",name:"formname",id:e.id+"-formname",anchor:"100%",allowBlank:!1}]},{columnWidth:.499,layout:"form",defaults:{msgTarget:"under"},items:[{xtype:"textfield",fieldLabel:_("quiz_form_formtpl"),description:"<b>[[+formtpl]]</b>",name:"formtpl",id:e.id+"-formtpl",anchor:"100%",allowBlank:!0,listeners:{render:{fn:e=>{Ext.isEmpty(e.value)&&e.setValue("QuizForm")},scope:this}}}]}]},{xtype:"checkboxgroup",columns:4,items:[{xtype:"xcheckbox",boxLabel:_("quiz_form_email"),description:"<b>[[+email]]</b>",inputValue:1,name:"email",id:Ext.id(),checked:e.record?.email||!1,listeners:{render:{fn:this.changeFields,scope:this},check:{fn:this.changeFields,scope:this}}},{xtype:"xcheckbox",boxLabel:_("quiz_form_autoresponder"),description:"<b>[[+autoresponder]]</b>",inputValue:1,name:"autoresponder",id:Ext.id(),checked:e.record?.autoresponder||!1,listeners:{render:{fn:this.changeFields,scope:this},check:{fn:this.changeFields,scope:this}}}]},{layout:"column",items:[{columnWidth:.499,layout:"form",defaults:{msgTarget:"under"},items:[{xtype:"textfield",fieldLabel:_("quiz_form_msg_error"),description:"<b>[[+error]]</b>",name:"error",id:e.id+"-error",anchor:"99.5%",allowBlank:!0}]},{columnWidth:.499,layout:"form",defaults:{msgTarget:"under"},items:[{xtype:"textfield",fieldLabel:_("quiz_form_msg_success"),description:"<b>[[+success]]</b>",name:"success",id:e.id+"-success",anchor:"99.5%",allowBlank:!0}]}]},{xtype:"fieldset",title:_("quiz_form_email"),columnWidth:1,id:Ext.id(),collapsible:!0,hidden:!1,anchor:"99.5%",items:this.getFormEmail(e)},{xtype:"fieldset",title:_("quiz_form_autoresponder"),columnWidth:1,id:Ext.id(),collapsible:!0,hidden:!1,anchor:"99.5%",items:this.getFormEmailUser(e)}]},getTabSteps:function(e){return[{xtype:"quiz-grid-steps",form_id:e.record?.id||0,id:Ext.id()}]},getTabContacts:function(e){return[{xtype:"xcheckbox",boxLabel:_("quiz_form_contactform"),name:"contactform",id:e.id+"-contactform",checked:!0},{xtype:"fieldset",title:_("quiz_form_content"),columnWidth:1,id:Ext.id(),collapsible:!0,hidden:!1,anchor:"99.5%",items:[{xtype:"textfield",fieldLabel:_("quiz_form_title"),description:"<b>[[+contact_title]]</b>",name:"contact_title",id:e.id+"-contact-title",anchor:"99.5%",allowBlank:!0},{xtype:"textarea",fieldLabel:_("quiz_form_description"),description:"<b>[[+contact_description]]</b>",name:"contact_description",id:e.id+"-contact-description",anchor:"99.5%",allowBlank:!0},{xtype:"quiz-image",fieldLabel:_("quiz_form_image"),description:"<b>[[+contact_image]]</b>",name:"contact_image",id:e.id+"-contact-image",anchor:"100%",allowBlank:!0},{xtype:"textarea",fieldLabel:_("quiz_form_content"),description:"<b>[[+contact_content]]</b>",name:"contact_content",id:e.id+"-contact-content",anchor:"99%",allowBlank:!0,listeners:{afterrender:e=>{Quiz.utils.renderRTE(e)}}}]},{xtype:"fieldset",title:_("quiz_form_fields"),columnWidth:1,id:Ext.id(),collapsible:!0,hidden:!1,anchor:"99.5%",items:[{xtype:"quiz-grid-fields",form_id:e.record?.id||0,step_id:0,contact:1,id:Ext.id()}]}]},getTabButtons:function(e){return[{layout:"column",items:[{columnWidth:.33,layout:"form",defaults:{msgTarget:"under"},items:[{xtype:"textfield",fieldLabel:_("quiz_form_btn_start"),description:"<b>[[+button]]</b>",name:"start",id:e.id+"-start",anchor:"99%",allowBlank:!0,listeners:{afterrender:e=>{Ext.isEmpty(e.value)&&e.setValue("Start")}}}]},{columnWidth:.33,layout:"form",defaults:{msgTarget:"under"},items:[{xtype:"textfield",fieldLabel:_("quiz_form_btn_submit"),description:"<b>[[+submit]]</b>",name:"submit",id:e.id+"-submit",anchor:"99%",allowBlank:!0,listeners:{afterrender:e=>{Ext.isEmpty(e.value)&&e.setValue("Submit")}}}]},{columnWidth:.33,layout:"form",defaults:{msgTarget:"under"},items:[{xtype:"textfield",fieldLabel:_("quiz_form_btn_reset"),description:"<b>[[+reset]]</b>",name:"reset",id:e.id+"-reset",anchor:"99%",allowBlank:!0,listeners:{afterrender:e=>{Ext.isEmpty(e.value)&&e.setValue("Reset")}}}]}]},{layout:"column",items:[{columnWidth:.499,layout:"form",defaults:{msgTarget:"under"},items:[{xtype:"textfield",fieldLabel:_("quiz_form_btn_prev"),description:"<b>[[+prev]]</b>",name:"prev",id:e.id+"-prev",anchor:"100%",allowBlank:!0,listeners:{afterrender:e=>{Ext.isEmpty(e.value)&&e.setValue("Prev")}}}]},{columnWidth:.499,layout:"form",defaults:{msgTarget:"under"},items:[{xtype:"textfield",fieldLabel:_("quiz_form_btn_next"),description:"<b>[[+next]]</b>",name:"next",id:e.id+"-next",anchor:"100%",allowBlank:!0,listeners:{afterrender:e=>{Ext.isEmpty(e.value)&&e.setValue("Next")}}}]}]}]},getTabResults:function(e){return[{xtype:"quiz-grid-results",form_id:e.record?.id||0,id:Ext.id()}]},getFormEmail:function(e){return[{xtype:"xcheckbox",boxLabel:_("quiz_form_emailusefieldforsubject"),inputValue:1,name:"emailusefieldforsubject",id:Ext.id(),checked:!!e.record&&e.record.emailusefieldforsubject,baseCls:"x-hide-label"},{layout:"column",items:[{columnWidth:.499,layout:"form",defaults:{msgTarget:"under"},items:[{xtype:"textfield",fieldLabel:_("quiz_form_emailsubject"),description:"<b>[[+emailsubject]]</b>",name:"emailsubject",id:e.id+"-emailsubject",anchor:"100%",allowBlank:!0}]},{columnWidth:.499,layout:"form",defaults:{msgTarget:"under"},items:[{xtype:"textfield",fieldLabel:_("quiz_form_emailtpl"),description:"<b>[[+emailtpl]]</b>",name:"emailtpl",id:e.id+"-emailtpl",anchor:"100%",allowBlank:!0,listeners:{render:e=>{Ext.isEmpty(e.value)&&e.setValue("QuizEmailManager")}}}]}]},{xtype:"textfield",fieldLabel:_("quiz_form_emailto"),description:"<b>[[+emailto]]</b>",name:"emailto",id:e.id+"-emailto",anchor:"100%",allowBlank:!0},{xtype:"label",cls:"desc-under",text:_("quiz_form_emailto_desc")},{xtype:"textarea",fieldLabel:_("quiz_form_emailtext"),description:"<b>[[+emailtext]]</b>",name:"emailtext",id:e.id+"-emailtext",anchor:"100%",allowBlank:!0}]},getFormEmailUser:function(e){return[{layout:"column",items:[{columnWidth:.4,layout:"form",defaults:{msgTarget:"under"},items:[{xtype:"textfield",fieldLabel:_("quiz_form_fiarsubject"),description:"<b>[[+fiarsubject]]</b>",name:"fiarsubject",id:e.id+"-fiarsubject",anchor:"100%",allowBlank:!0}]},{columnWidth:.4,layout:"form",defaults:{msgTarget:"under"},items:[{xtype:"textfield",fieldLabel:_("quiz_form_fiartpl"),description:"<b>[[+fiartpl]]</b>",name:"fiartpl",id:e.id+"-fiartpl",anchor:"100%",allowBlank:!0,listeners:{render:e=>{Ext.isEmpty(e.value)&&e.setValue("QuizEmailUser")}}}]},{columnWidth:.2,layout:"form",defaults:{msgTarget:"under"},items:[{xtype:"textfield",fieldLabel:_("quiz_form_fiartofield"),description:"<b>[[+fiartofield]]</b>",name:"fiartofield",id:e.id+"-fiartofield",anchor:"100%",allowBlank:!0,listeners:{render:e=>{Ext.isEmpty(e.value)&&e.setValue("email")}}}]}]},{xtype:"textfield",fieldLabel:_("quiz_form_fiarfiles"),description:"<b>[[+fiarfiles]]</b>",name:"fiarfiles",id:e.id+"-fiarfiles",anchor:"100%",allowBlank:!0,hidden:!0},{xtype:"textarea",fieldLabel:_("quiz_form_fiartext"),description:"<b>[[+fiartext]]</b>",name:"fiartext",id:e.id+"-fiartext",anchor:"100%",allowBlank:!0}]},changeFields:function(e,t){switch(e.name){case"email":e.checked?(Ext.getCmp(this.id+"-emailtpl").allowBlank=!1,Ext.getCmp(this.id+"-emailsubject").allowBlank=!1,Ext.getCmp(this.id+"-emailto").allowBlank=!1):(Ext.getCmp(this.id+"-emailtpl").allowBlank=!0,Ext.getCmp(this.id+"-emailsubject").allowBlank=!0,Ext.getCmp(this.id+"-emailto").allowBlank=!0);break;case"autoresponder":e.checked?(Ext.getCmp(this.id+"-fiartpl").allowBlank=!1,Ext.getCmp(this.id+"-fiarsubject").allowBlank=!1,Ext.getCmp(this.id+"-fiartofield").allowBlank=!1):(Ext.getCmp(this.id+"-fiartpl").allowBlank=!0,Ext.getCmp(this.id+"-fiarsubject").allowBlank=!0,Ext.getCmp(this.id+"-fiartofield").allowBlank=!0)}}}),Ext.reg("quiz-form-window-create",Quiz.window.CreateForm),Quiz.window.UpdateForm=function(e){(e=e||{}).id||(e.id="quiz-form-window-update"),Ext.applyIf(e,{title:"Form: ",action:"mgr/form/update"}),Quiz.window.UpdateForm.superclass.constructor.call(this,e)},Ext.extend(Quiz.window.UpdateForm,Quiz.window.CreateForm),Ext.reg("quiz-form-window-update",Quiz.window.UpdateForm);